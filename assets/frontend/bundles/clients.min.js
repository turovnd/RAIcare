var clients=function(e){function t(l){if(n[l])return n[l].exports;var o=n[l]={i:l,l:!1,exports:{}};return e[l].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,l){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=18)}({18:function(e,t,n){e.exports=function(e){return e.add=n(7),e.request=n(24),e}({})},24:function(e,t){e.exports=function(e){function t(){var e=document.getElementsByClassName("js-request-accept")[0],t=document.getElementsByClassName("js-request-reject")[0];e&&e.addEventListener("click",n),t&&t.addEventListener("click",l),a=new FormData,a.append("id",document.getElementById("clientId").value),a.append("csrf",document.getElementById("csrf").value)}function n(){a.append("status","accept"),o()}function l(){a.append("status","reject"),o()}function o(){var e=document.getElementById("application"),t={url:"/client/changestatus",type:"POST",data:a,beforeSend:function(){e.classList.add("loading")},success:function(t){t=JSON.parse(t),raisoft.core.log(t.message,t.status,s),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),window.setTimeout(function(){24===parseInt(t.code)&&window.location.reload(),25===parseInt(t.code)&&window.history.back()},1e3)},error:function(t){raisoft.core.log("ajax error occur on submitting application form","error",s,t),e.classList.remove("loading")}};raisoft.ajax.send(t)}var s="RAIsoft clients",a=null;return e.init=function(){t()},e}({})},7:function(e,t){e.exports=function(e){function t(){var e=document.getElementById("addClient");e&&e.addEventListener("click",n)}function n(){s=raisoft.notification.notify({type:"confirm",size:"large",message:'<form id="addClientForm"><h2>Новый клиент</h2><fieldset class="text-left"><div class="form-group"><label for="addClientName" class="form-group__label">Имя <span class="text-danger">*</span></label><input type="text" id="addClientName" name="name" class="form-group__control" maxlength="256"></div></fieldset><fieldset class="text-left"><div class="form-group"><label for="addClientEmail" class="form-group__label">Адрес электронной почты <span class="text-danger">*</span></label><input type="email" id="addClientEmail" name="email" class="form-group__control" maxlength="64"></div></fieldset><fieldset class="text-left"><div class="form-group"><label for="addClientOrganization" class="form-group__label">Организация / компания</label><input type="text" id="addClientOrganization" name="organization" class="form-group__control"></div></fieldset><fieldset class="text-left"><div class="form-group"><label for="addClientCity" class="form-group__label">Город</label><input type="text" id="addClientCity" name="city" class="form-group__control"></div></fieldset><fieldset class="text-left"><div class="form-group"><label for="addClientPhone" class="form-group__label">Телефон</label><input type="text" id="addClientPhone" name="phone" class="form-group__control" maxlength="20"></div></fieldset><fieldset class="text-left"><div class="form-group"><label for="addClientComment" class="form-group__label">Комментарий</label><textarea name="comment" id="addClientComment" rows="5" class="form-group__control"></textarea></div></fieldset></form>',showCancelButton:!0,validation:!0,confirmText:"Создать",confirm:l,cancel:function(){s=null}})}function l(){var e=document.getElementById("addClientForm"),t=new FormData(e);t.append("csrf",document.getElementById("csrf").value);var n={url:"/client/add",type:"POST",data:t,beforeSend:function(){},success:function(e){if(e=JSON.parse(e),raisoft.core.log(e.message,e.status,o),raisoft.notification.notify({type:e.status,message:e.message}),22===parseInt(e.code)){s.close(),s=null;var t=raisoft.draw.node("DIV","item clear-fix",{id:"client_"+e.id});t.innerHTML='<a href="/client/'+e.id+'" class="col-xs-3 col-sm-2 col-lg-1 text-center"><i class="fa fa-id-card-o fa-4x" aria-hidden="true"></i></a><ul class="col-xs-9 col-sm-10 col-lg-11 list-style--none"><li class="item__text col-xs-12"><div class="col-xs-12 col-sm-3 col-md-2 text-bold">Имя</div><div class="col-xs-12 col-sm-9 col-md-10 item__search-text">'+document.getElementById("addClientName").value+'</div></li><li class="item__text col-xs-12"><div class="col-xs-12 col-sm-3 col-md-2 text-bold">Эл. почта</div><div class="col-xs-12 col-sm-9 col-md-10">'+document.getElementById("addClientEmail").value+'</div></li><li class="item__text col-xs-12"><div class="col-xs-12 col-sm-3 col-md-2 text-bold">Телефон</div><div class="col-xs-12 col-sm-9 col-md-10">'+document.getElementById("addClientPhone").value+"</div></li></ul>",document.getElementById("withoutAccessClients").insertBefore(t,document.getElementById("withoutAccessClients").childNodes[0]),document.getElementById("withoutAccessClientsCounter").textContent=parseInt(document.getElementById("withoutAccessClientsCounter").textContent)+1}},error:function(e){raisoft.core.log("ajax error occur on submitting new client form","error",o,e)}};raisoft.ajax.send(n)}var o="RAIsoft clients",s=null;return e.init=function(){t()},e}({})}});