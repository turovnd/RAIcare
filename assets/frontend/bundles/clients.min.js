var clients=function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=29)}({10:function(e,t){e.exports=function(e){function t(){var e=document.getElementById("application"),t={url:"/client/changestatus",type:"POST",data:a,beforeSend:function(){e.classList.add("loading")},success:function(t){t=JSON.parse(t),raisoft.core.log(t.message,t.status,n),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),24===parseInt(t.code)&&(document.getElementsByClassName("section")[0].innerHTML=t.view),a=null},error:function(t){raisoft.core.log("ajax error occur on changing client status","error",n,t),e.classList.remove("loading")}};raisoft.ajax.send(t)}var n="Clients: statuss",a=null;return e.accept=function(){a=new FormData,a.append("id",document.getElementById("clientId").value),a.append("csrf",document.getElementById("csrf").value),a.append("status","accept"),t()},e.reject=function(){a=new FormData,a.append("id",document.getElementById("clientId").value),a.append("csrf",document.getElementById("csrf").value),a.append("status","reject"),t()},e.reestablish=function(){a=new FormData,a.append("id",document.getElementById("clientId").value),a.append("csrf",document.getElementById("csrf").value),a.append("status","reestablish"),t()},e.delete=function(){a=new FormData,a.append("id",document.getElementById("clientId").value),a.append("csrf",document.getElementById("csrf").value),a.append("status","delete"),t()},e}({})},29:function(e,t,n){e.exports=function(e){return e.status=n(10),e.edit=n(9),e.create=n(8),e}({})},8:function(e,t){e.exports=function(e){var t="Clients: creating";return e.client=function(){var e=document.getElementById("addClientModal"),n=new FormData(e);n.append("csrf",document.getElementById("csrf").value);var a={url:"/client/add",type:"POST",data:n,beforeSend:function(){e.getElementsByClassName("modal__content")[0].classList.add("loading")},success:function(n){n=JSON.parse(n),raisoft.core.log(n.message,n.status,t),e.getElementsByClassName("modal__content")[0].classList.remove("loading"),raisoft.notification.notify({type:n.status,message:n.message}),22===parseInt(n.code)&&(e.reset(),raisoft.modal.hide(e),window.location.assign("/client/"+n.id))},error:function(n){raisoft.core.log("ajax error occur on submitting new client form","error",t,n),e.getElementsByClassName("modal__content")[0].classList.remove("loading")}};raisoft.ajax.send(a)},e.user=function(){var e=new FormData;e.append("csrf",document.getElementById("csrf").value),e.append("client_id",document.getElementById("clientId").value);var n={url:"/profile/add",type:"POST",data:e,success:function(e){e=JSON.parse(e),raisoft.core.log(e.message,e.status,t),50!==parseInt(e.code)?raisoft.notification.notify({type:e.status,message:e.message}):window.location.reload()},error:function(e){raisoft.core.log("ajax error occur on submitting creating new user form","error",t,e)}};raisoft.ajax.send(n)},e.organization=function(){var e=document.getElementById("createOrganizationModal");if(!e)return void raisoft.core.log("Не удается найти форму создания организации. Перезагрузите страницу","error",t);var n=new FormData(e);n.append("csrf",document.getElementById("csrf").value),n.append("userId",document.getElementById("userId").value);var a={url:"/organization/new",type:"POST",data:n,beforeSend:function(){e.getElementsByClassName("modal__content")[0].classList.add("loading")},success:function(n){if(n=JSON.parse(n),raisoft.core.log(n.message,n.status,t),e.getElementsByClassName("modal__content")[0].classList.remove("loading"),raisoft.notification.notify({type:n.status,message:n.message}),131===parseInt(n.code)){var a=raisoft.draw.node("LI","col-xs-12 col-md-6"),o=raisoft.draw.node("OPTION","",{value:n.id}),s=document.getElementById("organizations"),r=document.getElementById("createPensionOrganization");a.innerHTML=n.organization,o.textContent=n.name,0===s.getElementsByTagName("li").length?(s.innerHTML="",s.appendChild(a),r.appendChild(o)):(s.insertBefore(a,s.childNodes[0]),r.insertBefore(o,r.childNodes[0])),e.reset(),raisoft.modal.hide(e)}},error:function(n){raisoft.core.log("ajax error occur on submitting new client form","error",t,n),e.getElementsByClassName("modal__content")[0].classList.remove("loading")}};raisoft.ajax.send(a)},e.pension=function(){var e=document.getElementById("createPensionModal");if(!e)return void raisoft.core.log("Не удается найти форму создания пансионата. Перезагрузите страницу","error",t);var n=new FormData(e);n.append("csrf",document.getElementById("csrf").value),n.append("userId",document.getElementById("userId").value);var a={url:"/pension/new",type:"POST",data:n,beforeSend:function(){e.getElementsByClassName("modal__content")[0].classList.add("loading")},success:function(n){if(n=JSON.parse(n),raisoft.core.log(n.message,n.status,t),e.getElementsByClassName("modal__content")[0].classList.remove("loading"),raisoft.notification.notify({type:n.status,message:n.message}),141===parseInt(n.code)){var a=raisoft.draw.node("LI","col-xs-12 col-md-6"),o=document.getElementById("pensions");a.innerHTML=n.pension,0===o.getElementsByTagName("li").length?(o.innerHTML="",o.appendChild(a)):o.insertBefore(a,o.childNodes[0]),e.reset(),raisoft.modal.hide(e)}},error:function(n){raisoft.core.log("ajax error occur on submitting new client form","error",t,n),e.getElementsByClassName("modal__content")[0].classList.remove("loading")}};raisoft.ajax.send(a)},e}({})},9:function(e,t){e.exports=function(e){return e.toggle=function(e){var t=e.closest(".js-field-name");t.getElementsByClassName("form-group__control-static")[0].classList.toggle("hide"),t.getElementsByClassName("form-group__control-group")[0].classList.toggle("hide")},e.save=function(e){var t=document.getElementById("application"),n=e.closest(".js-field-name"),a=n.getElementsByClassName("form-group__control")[0].value,o=n.getElementsByClassName("form-group__control")[0].name,s=new FormData;s.append("id",document.getElementById("clientId").value),s.append("csrf",document.getElementById("csrf").value),s.append("name",o),s.append("value",a);var r={url:"/client/update",type:"POST",data:s,beforeSend:function(){t.classList.add("loading")},success:function(e){e=JSON.parse(e),raisoft.core.log(e.message,e.status,"Clients: edit info"),t.classList.remove("loading"),raisoft.notification.notify({type:e.status,message:e.message}),25===parseInt(e.code)&&(n.getElementsByClassName("js-client-info")[0].textContent=a,n.getElementsByClassName("form-group__control-static")[0].classList.toggle("hide"),n.getElementsByClassName("form-group__control-group")[0].classList.toggle("hide"))},error:function(e){raisoft.core.log("ajax error occur on updating client info","error","Clients: edit info",e),t.classList.remove("loading")}};raisoft.ajax.send(r)},e}({})}});