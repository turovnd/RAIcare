var admin=function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}({14:function(e,t,n){e.exports=function(e){return e.roles=n(2),e.permissions=n(20),e}({})},2:function(e,t){e.exports=function(e){function t(){c=document.getElementById("roles"),document.getElementById("js-add-role").addEventListener("click",i);var e=document.getElementsByClassName("js-edit-role");for(d=0;d<e.length;d++)e[d].addEventListener("click",s);var t=document.getElementsByClassName("js-delete-role");for(d=0;d<t.length;d++)t[d].addEventListener("click",r)}function n(){var e=document.getElementById("newRoleForm"),t=new FormData,n=document.getElementById("newRoleFormId").value,o=document.getElementById("newRoleFormName").value;t.append("id",n),t.append("name",o);var a={url:"/admin/role/add",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,l),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),101===parseInt(t.code)){var a=raisoft.draw.node("LI","p-b-5");a.innerHTML='<span class="role-id">id:'+n+' - name: </span><span class="role-name" data-id="'+n+'" >'+o+'</span><button role="button" class="js-edit-role" data-id="'+n+'" data-name="'+o+'"><i class="fa fa-edit m-l-5 text-brand" aria-hidden="true"></i></button><button role="button" class="js-delete-role" data-id="'+n+'"><i class="fa fa-trash m-l-5 text-danger" aria-hidden="true"></i></button>',c.appendChild(a),a.getElementsByClassName("js-edit-role")[0].addEventListener("click",s),a.getElementsByClassName("js-delete-role")[0].addEventListener("click",r),m.close(),m=null}},error:function(t){raisoft.core.log("ajax error occur on crating new role","error",l,t),e.classList.remove("loading")}};raisoft.ajax.send(a)}function o(){var e=document.getElementById("editRoleForm"),t=new FormData,n=document.getElementById("editRoleFormName").value,o=document.getElementById("editRoleFormName").dataset.id;t.append("name",n),t.append("id",o);var a={url:"/admin/role/update",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,l),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),103===parseInt(t.code)){var a=document.querySelector('.role-name[data-id="'+o+'"]');a.textContent=n,a.parentNode.getElementsByClassName("js-edit-role")[0].dataset.name=n,u.close(),u=null}},error:function(t){raisoft.core.log("ajax error occur on updating role form","error",l,t),e.classList.remove("loading")}};raisoft.ajax.send(a)}function a(){var e=document.getElementById("deleteRoleForm"),t=new FormData,n=e.dataset.id;t.append("id",n);var o={url:"/admin/role/delete",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,l),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),104===parseInt(t.code)){var o=document.querySelector('.role-name[data-id="'+n+'"]');o.parentNode.getElementsByClassName("js-edit-role")[0].removeEventListener("click",s),o.parentNode.getElementsByClassName("js-delete-role")[0].removeEventListener("click",r),o.parentNode.remove(),f.close(),f=null}},error:function(t){raisoft.core.log("ajax error occur on deleting role form","error",l,t),e.classList.remove("loading")}};raisoft.ajax.send(o)}function i(){null===m&&(m=raisoft.notification.notify({type:"confirm",message:'<div id="newRoleForm"><h2>Новая роль</h2><div class="form-group col-xs-12 col-sm-6"><input id="newRoleFormId" class="form-group__control" type="number" placeholder="id роли" min="1"></div><div class="form-group col-xs-12 col-sm-6"><input id="newRoleFormName" class="form-group__control" type="text" placeholder="наименование роли"></div></div>',showCancelButton:!0,validation:!0,confirmText:"Создать",confirm:n,cancel:function(){m=null}}))}function s(){if(null===u){var e=this.dataset.id,t=this.dataset.name;u=raisoft.notification.notify({type:"confirm",message:'<div id="editRoleForm"><h2>Редактировать роль</h2><div class="form-group col-xs-12 col-sm-6"><input id="editRoleFormId" class="form-group__control" type="number" placeholder="id роли" value="'+e+'" min="1"></div><div class="form-group col-xs-12 col-sm-6"><input id="editRoleFormName" class="form-group__control" type="text" placeholder="наименование роли" data-id="'+e+'" value="'+t+'"></div>',showCancelButton:!0,validation:!0,confirmText:"Изменить",confirm:o,cancel:function(){u=null}})}}function r(){if(null===f){var e=this.dataset.id;f=raisoft.notification.notify({type:"confirm",message:'<div id="deleteRoleForm" data-id="'+e+'"><h2>Удалить роль</h2><p>Удалив роль, Вы не сможете её восстановить</p></div>',showCancelButton:!0,validation:!0,confirmText:"Удалить",confirm:a,cancel:function(){f=null}})}}var d,l="RAIsoft admin",c=null,m=null,u=null,f=null;return e.init=function(){t()},e}({})},20:function(e,t){e.exports=function(e){function t(){c=document.getElementById("permissions"),document.getElementById("js-add-permission").addEventListener("click",i);var e=document.getElementsByClassName("js-edit-permission");for(d=0;d<e.length;d++)e[d].addEventListener("click",s);var t=document.getElementsByClassName("js-delete-permission");for(d=0;d<t.length;d++)t[d].addEventListener("click",r)}function n(){var e=document.getElementById("newPermissionForm"),t=new FormData,n=document.getElementById("newPermissionFormId").value,o=document.getElementById("newPermissionFormName").value;t.append("id",n),t.append("name",o);var a={url:"/admin/permission/add",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,l),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),111===parseInt(t.code)){var a=raisoft.draw.node("LI","p-b-5");a.innerHTML='<span class="permission-id">id:'+n+' - name:</span><span class="permission-name" data-id="'+n+'" >'+o+'</span><button role="button" class="js-edit-permission" data-id="'+n+'" data-name="'+o+'"><i class="fa fa-edit m-l-5 text-brand" aria-hidden="true"></i></button><button role="button" class="js-delete-permission" data-id="'+n+'"><i class="fa fa-trash m-l-5 text-danger" aria-hidden="true"></i></button>',c.appendChild(a),a.getElementsByClassName("js-edit-permission")[0].addEventListener("click",s),a.getElementsByClassName("js-delete-permission")[0].addEventListener("click",r),m.close(),m=null}},error:function(t){raisoft.core.log("ajax error occur on crating new permission","error",l,t),e.classList.remove("loading")}};raisoft.ajax.send(a)}function o(){var e=document.getElementById("editPermissionForm"),t=new FormData,n=document.getElementById("editPermissionFormName").value,o=document.getElementById("editPermissionFormName").dataset.id;t.append("name",n),t.append("id",o);var a={url:"/admin/permission/update",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,l),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),113===parseInt(t.code)){var a=document.querySelector('.permission-name[data-id="'+o+'"]');a.textContent=n,a.parentNode.getElementsByClassName("js-edit-permission")[0].dataset.name=n,u.close(),u=null}},error:function(t){raisoft.core.log("ajax error occur on updating permission form","error",l,t),e.classList.remove("loading")}};raisoft.ajax.send(a)}function a(){var e=document.getElementById("deletePermissionForm"),t=new FormData,n=e.dataset.id;t.append("id",n);var o={url:"/admin/permission/delete",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,l),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),114===parseInt(t.code)){var o=document.querySelector('.permission-name[data-id="'+n+'"]');o.parentNode.getElementsByClassName("js-edit-permission")[0].removeEventListener("click",s),o.parentNode.getElementsByClassName("js-delete-permission")[0].removeEventListener("click",r),o.parentNode.remove(),f.close(),f=null}},error:function(t){raisoft.core.log("ajax error occur on deleting permission form","error",l,t),e.classList.remove("loading")}};raisoft.ajax.send(o)}function i(){null===m&&(m=raisoft.notification.notify({type:"confirm",message:'<div id="newPermissionForm"><h2>Новое право доступа</h2><div class="form-group col-xs-12 col-sm-6"><input id="newPermissionFormId" class="form-group__control" type="number" placeholder="id права доступа" min="1"></div><div class="form-group col-xs-12 col-sm-6"><input id="newPermissionFormName" class="form-group__control" type="text" placeholder="Наименование права доступа"></div></div>',showCancelButton:!0,validation:!0,confirmText:"Создать",confirm:n,cancel:function(){m=null}}))}function s(){if(null===u){var e=this.dataset.id,t=this.dataset.name;u=raisoft.notification.notify({type:"confirm",message:'<div id="editPermissionForm"><h2>Редактировать право доступа</h2><div class="form-group"><input id="editPermissionFormName" type="text" class="form-group__control" data-id="'+e+'" value="'+t+'"></div></div>',showCancelButton:!0,validation:!0,confirmText:"Изменить",confirm:o,cancel:function(){u=null}})}}function r(){if(null===f){var e=this.dataset.id;f=raisoft.notification.notify({type:"confirm",message:'<div id="deletePermissionForm" data-id="'+e+'"><h2>Удалить право доступа</h2><p>Удалив право доступа, Вы не сможете его восстановить</p></div>',showCancelButton:!0,validation:!0,confirmText:"Удалить",confirm:a,cancel:function(){f=null}})}}var d,l="RAIsoft admin",c=null,m=null,u=null,f=null;return e.init=function(){t()},e}({})}});