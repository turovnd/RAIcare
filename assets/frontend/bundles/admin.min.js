var admin=function(e){function t(n){if(o[n])return o[n].exports;var s=o[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=20)}({2:function(e,t){e.exports=function(e){function t(){c=document.getElementById("permissions"),document.getElementById("js-add-permission").addEventListener("click",a);var e=document.getElementsByClassName("js-edit-permission");for(l=0;l<e.length;l++)e[l].addEventListener("click",r);var t=document.getElementsByClassName("js-delete-permission");for(l=0;l<t.length;l++)t[l].addEventListener("click",i)}function o(){var e=document.getElementById("newPermissionForm"),t=new FormData,o=document.getElementById("newPermissionFormId").value,n=document.getElementById("newPermissionFormName").value;t.append("id",o),t.append("name",n),t.append("csrf",document.getElementById("csrf").value);var s={url:"/admin/permission/add",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,d),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),111===parseInt(t.code)){var s=raisoft.draw.node("LI","p-b-10");s.innerHTML='<div class="fl_r"><button role="button" class="fl_l m-l-5 js-edit-permission" data-id="'+o+'" data-name="'+n+'"><i class="fa fa-edit text-brand" aria-hidden="true"></i></button><button role="button" class="fl_l m-l-5 js-delete-permission" data-id="'+o+'"><i class="fa fa-trash text-danger" aria-hidden="true"></i></button></div><span class="permission-id">id:'+o+' - name:</span><span class="permission-name" data-id="'+o+'" >'+n+"</span>",c.appendChild(s),s.getElementsByClassName("js-edit-permission")[0].addEventListener("click",r),s.getElementsByClassName("js-delete-permission")[0].addEventListener("click",i),m.close(),m=null}},error:function(t){raisoft.core.log("ajax error occur on crating new permission","error",d,t),e.classList.remove("loading")}};raisoft.ajax.send(s)}function n(){var e=document.getElementById("editPermissionForm"),t=new FormData,o=document.getElementById("editPermissionFormName").value,n=document.getElementById("editPermissionFormName").dataset.id;t.append("name",o),t.append("id",n),t.append("csrf",document.getElementById("csrf").value);var s={url:"/admin/permission/update",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,d),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),113===parseInt(t.code)){var s=document.querySelector('.permission-name[data-id="'+n+'"]'),a=document.querySelectorAll('[data-permission="'+n+'"]');for(l=0;l<a.length;l++)a[l].textContent=o;s.textContent=o,s.parentNode.getElementsByClassName("js-edit-permission")[0].dataset.name=o,u.close(),u=null}},error:function(t){raisoft.core.log("ajax error occur on updating permission form","error",d,t),e.classList.remove("loading")}};raisoft.ajax.send(s)}function s(){var e=document.getElementById("deletePermissionForm"),t=new FormData,o=e.dataset.id;t.append("id",o),t.append("csrf",document.getElementById("csrf").value);var n={url:"/admin/permission/delete",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,d),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),114===parseInt(t.code)){var n=document.querySelector('.permission-name[data-id="'+o+'"]').parentNode,s=document.querySelectorAll('[data-permission="'+o+'"]');for(l=0;l<s.length;l++)1===s[l].parentNode.childElementCount?s[l].parentNode.parentNode.remove():s[l].remove();n.getElementsByClassName("js-edit-permission")[0].removeEventListener("click",r),n.getElementsByClassName("js-delete-permission")[0].removeEventListener("click",i),n.remove(),f.close(),f=null}},error:function(t){raisoft.core.log("ajax error occur on deleting permission form","error",d,t),e.classList.remove("loading")}};raisoft.ajax.send(n)}function a(){null===m&&(m=raisoft.notification.notify({type:"confirm",message:'<div id="newPermissionForm"><h2>Новое право доступа</h2><div class="form-group col-xs-12 col-sm-6"><input id="newPermissionFormId" class="form-group__control" type="number" placeholder="id права доступа" min="1"></div><div class="form-group col-xs-12 col-sm-6"><input id="newPermissionFormName" class="form-group__control" type="text" placeholder="Наименование права доступа"></div></div>',showCancelButton:!0,validation:!0,confirmText:"Создать",confirm:o,cancel:function(){m=null}}))}function r(){if(null===u){var e=this.dataset.id,t=this.dataset.name;u=raisoft.notification.notify({type:"confirm",message:'<div id="editPermissionForm"><h2>Редактировать право доступа</h2><div class="form-group"><input id="editPermissionFormName" type="text" class="form-group__control" data-id="'+e+'" value="'+t+'"></div></div>',showCancelButton:!0,validation:!0,confirmText:"Изменить",confirm:n,cancel:function(){u=null}})}}function i(){if(null===f){var e=this.dataset.id;f=raisoft.notification.notify({type:"confirm",message:'<div id="deletePermissionForm" data-id="'+e+'"><h2>Удалить право доступа</h2><p>Удалив право доступа, Вы не сможете его восстановить</p></div>',showCancelButton:!0,validation:!0,confirmText:"Удалить",confirm:s,cancel:function(){f=null}})}}var l,d="RAIsoft admin",c=null,m=null,u=null,f=null;return e.init=function(){t()},e}({})},20:function(e,t,o){e.exports=function(e){return e.roles=o(4),e.permissions=o(2),e.rolePermis=o(3),e}({})},3:function(e,t){e.exports=function(e){function t(){u=document.getElementById("rolePermis"),document.getElementById("js-add-role-permis").addEventListener("click",a);var e=document.getElementsByClassName("js-edit-role-permis");for(c=0;c<e.length;c++)e[c].addEventListener("click",r);var t=document.getElementsByClassName("js-delete-role-permis");for(c=0;c<t.length;c++)t[c].addEventListener("click",i)}function o(){var e=document.getElementById("newRolePermisForm"),t=new FormData,o=document.getElementById("newRolePermisFormRole").value,n=document.getElementById("newRolePermisFormPermission").querySelectorAll(".checkbox:checked"),s=[];for(c=0;c<n.length;c++)s.push(n[c].id.split("_")[2]);t.append("role",o),t.append("permissions",JSON.stringify(s)),t.append("csrf",document.getElementById("csrf").value);var a={url:"/admin/rolepermis/add",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,m),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),123===parseInt(t.code)){var n=raisoft.draw.node("LI","p-b-5");n.innerHTML='<span class="role-permis-role" data-role="'+o+'">'+t.roleName+'</span><button role="button" class="js-edit-role-permis" data-role="'+o+"\" data-permissions='"+JSON.stringify(s)+'\'><i class="fa fa-edit m-l-5 text-brand" aria-hidden="true"></i></button><button role="button" class="js-delete-role-permis" data-role="'+o+'"><i class="fa fa-trash m-l-5 text-danger" aria-hidden="true"></i></button><ul>'+t.permissionsStr+"</ul>",u.appendChild(n),n.getElementsByClassName("js-edit-role-permis")[0].addEventListener("click",r),n.getElementsByClassName("js-delete-role-permis")[0].addEventListener("click",i),f.close(),f=null}},error:function(t){raisoft.core.log("ajax error occur on crating new role-permis","error",m,t),e.classList.remove("loading")}};raisoft.ajax.send(a)}function n(){var e=document.getElementById("editRolePermisForm"),t=new FormData,o=document.getElementById("editRolePermisForm").dataset.role,n=document.getElementById("editRolePermisForm").querySelectorAll(".checkbox:checked"),s=[];for(c=0;c<n.length;c++)s.push(n[c].id.split("_")[2]);t.append("role",o),t.append("permissions",JSON.stringify(s)),t.append("csrf",document.getElementById("csrf").value);var a={url:"/admin/rolepermis/update",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,m),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),124===parseInt(t.code)){var n=document.querySelector('[data-role="'+o+'"]').parentNode;n.innerHTML='<span class="role-permis-role" data-role="'+o+'">'+t.roleName+'</span><button role="button" class="js-edit-role-permis" data-role="'+o+"\" data-permissions='"+JSON.stringify(s)+'\'><i class="fa fa-edit m-l-5 text-brand" aria-hidden="true"></i></button><button role="button" class="js-delete-role-permis" data-role="'+o+'"><i class="fa fa-trash m-l-5 text-danger" aria-hidden="true"></i></button><ul>'+t.permissionsStr+"</ul>",n.getElementsByClassName("js-edit-role-permis")[0].addEventListener("click",r),n.getElementsByClassName("js-delete-role-permis")[0].addEventListener("click",i),p.close(),p=null}},error:function(t){raisoft.core.log("ajax error occur on updating role-permis form","error",m,t),e.classList.remove("loading")}};raisoft.ajax.send(a)}function s(){var e=document.getElementById("deleteRolePermisForm"),t=new FormData,o=e.dataset.role;t.append("role",o),t.append("csrf",document.getElementById("csrf").value);var n={url:"/admin/rolepermis/delete",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,m),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),125===parseInt(t.code)){var n=document.querySelector('[data-role="'+o+'"]').parentNode;n.getElementsByClassName("js-edit-role-permis")[0].removeEventListener("click",r),n.getElementsByClassName("js-delete-role-permis")[0].removeEventListener("click",i),n.remove(),g.close(),g=null}},error:function(t){raisoft.core.log("ajax error occur on deleting role-permis form","error",m,t),e.classList.remove("loading")}};raisoft.ajax.send(n)}function a(){null===f&&(f=raisoft.notification.notify({type:"confirm",message:'<div id="newRolePermisForm" class="text-left"><h2 class="text-center">Новая связь роли и прав доступа</h2><div class="form-group"><label for="newRolePermisFormRole" class="form-group__label">Выберите роль</label> <select name="newRolePermisFormRole" id="newRolePermisFormRole" class="form-group__control">'+l()+'</select></div><div id="newRolePermisFormPermission" class="form-group"><label class="form-group__label">Выберите права доступа</label> '+d()+"</div></div>",showCancelButton:!0,validation:!0,confirmText:"Создать",confirm:o,cancel:function(){f=null}}))}function r(){if(null===p){var e=this.dataset.role,t=JSON.parse(this.dataset.permissions);for(p=raisoft.notification.notify({type:"confirm",message:'<div id="editRolePermisForm" data-role="'+e+'"><h2>Редактировать связь роли и права доступа</h2><div class="form-group text-left"><div class="form-group"><label class="form-group__label">Выберите права доступа</label> '+d()+"</div></div></div>",showCancelButton:!0,validation:!0,confirmText:"Изменить",confirm:n,cancel:function(){p=null}}),c=0;c<t.length;c++)document.getElementById("modal_permission_"+t[c]).checked="checked"}}function i(){if(null===g){var e=this.dataset.role;g=raisoft.notification.notify({type:"confirm",message:'<div id="deleteRolePermisForm" data-role="'+e+'"><h2>Удалить связь роли и права доступа</h2><p>Удалив право доступа, Вы не сможете его восстановить</p></div>',showCancelButton:!0,validation:!0,confirmText:"Удалить",confirm:s,cancel:function(){g=null}})}}function l(){var e=document.getElementsByClassName("role-name"),t="";for(c=0;c<e.length;c++)t+='<option value="'+e[c].dataset.id+'">'+e[c].textContent+"</option>";return t}function d(){var e=document.getElementsByClassName("permission-name"),t="";for(c=0;c<e.length;c++)t+='<p><input type="checkbox" id="modal_permission_'+e[c].dataset.id+'" class="checkbox" ><label for="modal_permission_'+e[c].dataset.id+'" class="checkbox-label">'+e[c].textContent+"</label></p>";return t}var c,m="RAIsoft admin",u=null,f=null,p=null,g=null;return e.init=function(){t()},e}({})},4:function(e,t){e.exports=function(e){function t(){c=document.getElementById("roles"),document.getElementById("js-add-role").addEventListener("click",a);var e=document.getElementsByClassName("js-edit-role");for(l=0;l<e.length;l++)e[l].addEventListener("click",r);var t=document.getElementsByClassName("js-delete-role");for(l=0;l<t.length;l++)t[l].addEventListener("click",i)}function o(){var e=document.getElementById("newRoleForm"),t=new FormData,o=document.getElementById("newRoleFormId").value,n=document.getElementById("newRoleFormName").value;t.append("id",o),t.append("name",n),t.append("csrf",document.getElementById("csrf").value);var s={url:"/admin/role/add",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,d),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),101===parseInt(t.code)){var s=raisoft.draw.node("LI","p-b-10");s.innerHTML='<div class="fl_r"><button role="button" class="fl_l m-l-5 js-edit-role" data-id="'+o+'" data-name="'+n+'"><i class="fa fa-edit text-brand" aria-hidden="true"></i></button><button role="button" class="fl_l m-l-5 js-delete-role" data-id="'+o+'"><i class="fa fa-trash text-danger" aria-hidden="true"></i></button></div><span class="role-id">id:'+o+' - name: </span><span class="role-name" data-id="'+o+'" >'+n+"</span>",c.appendChild(s),s.getElementsByClassName("js-edit-role")[0].addEventListener("click",r),s.getElementsByClassName("js-delete-role")[0].addEventListener("click",i),m.close(),m=null}},error:function(t){raisoft.core.log("ajax error occur on crating new role","error",d,t),e.classList.remove("loading")}};raisoft.ajax.send(s)}function n(){var e=document.getElementById("editRoleForm"),t=new FormData,o=document.getElementById("editRoleFormName").value,n=document.getElementById("editRoleFormName").dataset.id;t.append("name",o),t.append("id",n),t.append("csrf",document.getElementById("csrf").value);var s={url:"/admin/role/update",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,d),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),103===parseInt(t.code)){var s=document.querySelector('.role-name[data-id="'+n+'"]');document.querySelector('.role-permis-role[data-role="'+n+'"]')&&(document.querySelector('.role-permis-role[data-role="'+n+'"]').textContent=o),s.textContent=o,s.parentNode.getElementsByClassName("js-edit-role")[0].dataset.name=o,u.close(),u=null}},error:function(t){raisoft.core.log("ajax error occur on updating role form","error",d,t),e.classList.remove("loading")}};raisoft.ajax.send(s)}function s(){var e=document.getElementById("deleteRoleForm"),t=new FormData,o=e.dataset.id;t.append("id",o),t.append("csrf",document.getElementById("csrf").value);var n={url:"/admin/role/delete",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,d),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),104===parseInt(t.code)){var n=document.querySelector('.role-name[data-id="'+o+'"]');document.querySelector('.role-permis-role[data-role="'+o+'"]')&&document.querySelector('.role-permis-role[data-role="'+o+'"]').parentNode.remove(),n.parentNode.getElementsByClassName("js-edit-role")[0].removeEventListener("click",r),n.parentNode.getElementsByClassName("js-delete-role")[0].removeEventListener("click",i),n.parentNode.remove(),f.close(),f=null}},error:function(t){raisoft.core.log("ajax error occur on deleting role form","error",d,t),e.classList.remove("loading")}};raisoft.ajax.send(n)}function a(){null===m&&(m=raisoft.notification.notify({type:"confirm",message:'<div id="newRoleForm"><h2>Новая роль</h2><div class="form-group col-xs-12 col-sm-6"><input id="newRoleFormId" class="form-group__control" type="number" placeholder="id роли" min="1"></div><div class="form-group col-xs-12 col-sm-6"><input id="newRoleFormName" class="form-group__control" type="text" placeholder="наименование роли"></div></div>',showCancelButton:!0,validation:!0,confirmText:"Создать",confirm:o,cancel:function(){m=null}}))}function r(){if(null===u){var e=this.dataset.id,t=this.dataset.name;u=raisoft.notification.notify({type:"confirm",message:'<div id="editRoleForm"><h2>Редактировать роль</h2><div class="form-group col-xs-12 col-sm-6"><input id="editRoleFormId" class="form-group__control" type="number" placeholder="id роли" value="'+e+'" min="1"></div><div class="form-group col-xs-12 col-sm-6"><input id="editRoleFormName" class="form-group__control" type="text" placeholder="наименование роли" data-id="'+e+'" value="'+t+'"></div>',showCancelButton:!0,validation:!0,confirmText:"Изменить",confirm:n,cancel:function(){u=null}})}}function i(){if(null===f){var e=this.dataset.id;f=raisoft.notification.notify({type:"confirm",message:'<div id="deleteRoleForm" data-id="'+e+'"><h2>Удалить роль</h2><p>Удалив роль, Вы не сможете её восстановить</p></div>',showCancelButton:!0,validation:!0,confirmText:"Удалить",confirm:s,cancel:function(){f=null}})}}var l,d="RAIsoft admin",c=null,m=null,u=null,f=null;return e.init=function(){t()},e}({})}});