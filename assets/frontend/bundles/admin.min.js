var admin=function(e){function t(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}({14:function(e,t,o){e.exports=function(e){return e.roles=o(2),e}({})},2:function(e,t){e.exports=function(e){function t(){c=document.getElementById("roles"),document.getElementById("js-add-role").addEventListener("click",r);var e=document.getElementsByClassName("js-edit-role");for(d=0;d<e.length;d++)e[d].addEventListener("click",i);var t=document.getElementsByClassName("js-delete-role");for(d=0;d<t.length;d++)t[d].addEventListener("click",s)}function o(){var e=document.getElementById("newRoleForm"),t=new FormData,o=document.getElementById("newRoleFormName").value;t.append("name",o);var n={url:"/admin/role/add",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,l),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),101===parseInt(t.code)){var n=raisoft.draw.node("LI","p-b-5");n.innerHTML='<span class="role-name" data-id="'+t.id+'" >'+o+'</span><button role="button" class="js-edit-role" data-id="'+t.id+'" data-name="'+o+'"><i class="fa fa-edit m-l-5 text-brand" aria-hidden="true"></i></button><button role="button" class="js-delete-role" data-id="'+t.id+'"><i class="fa fa-trash m-l-5 text-danger" aria-hidden="true"></i></button>',c.appendChild(n),n.getElementsByClassName("js-edit-role")[0].addEventListener("click",i),n.getElementsByClassName("js-delete-role")[0].addEventListener("click",s),u.close(),u=null}},error:function(t){raisoft.core.log("ajax error occur on crating new role","error",l,t),e.classList.remove("loading")}};raisoft.ajax.send(n)}function n(){var e=document.getElementById("editRoleForm"),t=new FormData,o=document.getElementById("editRoleFormName").value,n=document.getElementById("editRoleFormName").dataset.id;t.append("name",o),t.append("id",n);var a={url:"/admin/role/update",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,l),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),103===parseInt(t.code)){document.querySelector('.role-name[data-id="'+n+'"]').textContent=o,m.close(),m=null}},error:function(t){raisoft.core.log("ajax error occur on updating role form","error",l,t),e.classList.remove("loading")}};raisoft.ajax.send(a)}function a(){var e=document.getElementById("deleteRoleForm"),t=new FormData,o=e.dataset.id;t.append("id",o);var n={url:"/admin/role/delete",type:"POST",data:t,beforeSend:function(){e.classList.add("loading")},success:function(t){if(t=JSON.parse(t),raisoft.core.log(t.message,t.status,l),e.classList.remove("loading"),raisoft.notification.notify({type:t.status,message:t.message}),104===parseInt(t.code)){document.querySelector('.role-name[data-id="'+o+'"]').parentNode.remove(),f.close(),f=null}},error:function(t){raisoft.core.log("ajax error occur on deleting role form","error",l,t),e.classList.remove("loading")}};raisoft.ajax.send(n)}function r(){u=raisoft.notification.notify({type:"confirm",message:'<div id="newRoleForm"><h2>Новая роль</h2><div class="form-group"><input id="newRoleFormName" class="form-group__control" type="text" placeholder="Введите название роли"></div></div>',showCancelButton:!0,validation:!0,confirmText:"Создать",confirm:o})}function i(){var e=this.dataset.id,t=this.dataset.name;m=raisoft.notification.notify({type:"confirm",message:'<div id="editRoleForm"><h2>Редактировать роль</h2><div class="form-group"><input id="editRoleFormName" class="form-group__control" data-id="'+e+'" value="'+t+'"></div></div>',showCancelButton:!0,validation:!0,confirmText:"Изменить",confirm:n})}function s(){var e=this.dataset.id;f=raisoft.notification.notify({type:"confirm",message:'<div id="deleteRoleForm" data-id="'+e+'"><h2>Удалить роль</h2><p>Удалив роль, Вы не сможете её восстановить</p></div>',showCancelButton:!0,validation:!0,confirmText:"Удалить",confirm:a})}var d,l="RAIsoft admin",c=null,u=null,m=null,f=null;return e.init=function(){t()},e}({})}});